
/* Setting properties */

SET NAMES NONE;
SET SQL DIALECT 3;
CONNECT 'localhost/3050:/opt/redflaskr/instance/flaskr.fdb' USER 'sysdba' PASSWORD 'masterkey';
SET AUTODDL ON;

/* ----- Creating Tables ----- */

/* POSTS */
CREATE TABLE POSTS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    AUTHOR_ID INTEGER NOT NULL,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    TITLE VARCHAR(120) NOT NULL,
    "BODY" VARCHAR(6000) NOT NULL);


/* USERS */
CREATE TABLE USERS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    USERNAME VARCHAR(256) NOT NULL,
    "PASSWORD" VARCHAR(256) NOT NULL);


/* ----- PRIMARY KEYs defining ----- */

/* POSTS.INTEG_5 */
ALTER TABLE POSTS
	ADD PRIMARY KEY (ID);

/* USERS.INTEG_1 */
ALTER TABLE USERS
	ADD PRIMARY KEY (ID);

/* ----- UNIQUE KEYs defining ----- */

/* USERS.INTEG_2 */
ALTER TABLE USERS
	ADD UNIQUE (USERNAME);

/* ----- FOREIGN KEYs defining ----- */

/* POSTS.INTEG_7 */
ALTER TABLE POSTS
	ADD FOREIGN KEY (AUTHOR_ID) REFERENCES USERS (ID);

